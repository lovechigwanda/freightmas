{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2026-01-17 19:16:43.954497",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Forwarding Job",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!-- Forwarding Job Cost Sheet - Simplified: Quoted vs Invoiced -->\n{%- set no_default_print_heading = 1 -%}\n{% set cost_data = doc.get_charge_details_for_cost_sheet() or {} %}\n{% set party_data = doc.get_party_details_for_cost_sheet() or {} %}\n{% set totals = doc.get_job_totals_summary() or {} %}\n<div class=\"print-format\">\n  <style>\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body { font-family: Arial, sans-serif; font-size: 11px; color: #000; line-height: 1.3; background: #fff; }\n    .print-format { width: 100%; max-width: 100%; padding: 15px; }\n    \n    /* Header Styling */\n    .header-title { \n      text-align: center; \n      font-size: 16px; \n      font-weight: 700; \n      margin-bottom: 8px; \n      text-transform: uppercase; \n      color: #000;\n      letter-spacing: 0.3px;\n    }\n    \n    .header-subtitle {\n      text-align: center;\n      font-size: 14px;\n      color: #000;\n      margin-bottom: 12px;\n      line-height: 1.2;\n    }\n    \n    .header-table { \n      display: none;\n    }\n    \n    /* Section Titles */\n    .section-title { \n      font-weight: 700; \n      font-size: 13px; \n      margin: 12px 0 8px 0; \n      text-transform: uppercase; \n      color: #000;\n      background: #fff;\n      border-bottom: 2px solid #000;\n      padding: 7px 10px;\n      letter-spacing: 0.3px;\n    }\n    \n    /* Tables */\n    .summary-table, .charge-table, .party-table { \n      width: 100%; \n      border-collapse: collapse; \n      margin-bottom: 12px;\n      border: 1px solid #000;\n      background: #fff;\n    }\n    \n    .summary-table th, .charge-table th, .party-table th { \n      background-color: #fff; \n      color: #000;\n      padding: 6px 8px; \n      border: 1px solid #000;\n      text-align: right; \n      font-weight: 700; \n      font-size: 12px;\n      text-transform: uppercase;\n      letter-spacing: 0.2px;\n    }\n    \n    .summary-table th:first-child, .charge-table th:first-child, .party-table th:first-child {\n      text-align: left;\n    }\n    \n    .summary-table td, .charge-table td, .party-table td { \n      padding: 5px 8px; \n      border: 1px solid #000; \n      text-align: right; \n      font-size: 12px;\n      line-height: 1.2;\n    }\n    \n    /* No alternating rows - keep it clean */\n    .summary-table tbody tr:nth-child(odd), \n    .charge-table tbody tr:nth-child(odd), \n    .party-table tbody tr:nth-child(odd) { \n      background-color: #fff; \n    }\n    \n    /* First column alignment */\n    .summary-table td:first-child,\n    .charge-table td:first-child, \n    .party-table td:first-child { \n      text-align: left; \n      font-weight: 500;\n    }\n    \n    /* Total Row */\n    .total-row { \n      background-color: #fff; \n      font-weight: 700;\n      border-top: 2px solid #000;\n      border-bottom: 2px solid #000;\n    }\n    \n    /* Number Formatting */\n    .number { \n      text-align: right; \n      font-family: monospace;\n      letter-spacing: 0.1px;\n    }\n    \n    /* Color Indicators - Only for Variances */\n    .positive { \n      color: #008000; \n      font-weight: 700;\n    }\n    \n    .negative { \n      color: #cc0000; \n      font-weight: 700;\n    }\n    \n    /* Footer */\n    .footer { \n      margin-top: 15px; \n      text-align: center; \n      font-size: 9px; \n      color: #000; \n      border-top: 1px solid #000; \n      padding-top: 8px;\n    }\n    \n    /* Print Media */\n    @media print { \n      body { padding: 10px; margin: 0; }\n      .print-format { padding: 10px; }\n      .page-break { page-break-after: always; }\n      .summary-table, .charge-table, .party-table { page-break-inside: avoid; }\n    }\n    /* Page Numbers */\n    .page-number {\n      position: fixed;\n      bottom: 15px;\n      right: 15px;\n      font-size: 9px;\n      color: #000;\n    }\n    \n  </style>\n  <div class=\"header-title\">{{ doc.company or \"FreightMas\" }} - Forwarding Job Cost Sheet</div>\n  <div class=\"header-subtitle\">\n    Job No: {{ doc.name }} | Customer Ref: {{ doc.customer_reference or \"\u2014\" }}<br>\n    Customer: {{ doc.customer }}, Mode: {{ (doc.shipment_mode or \"Sea\") ~ \" \" ~ (doc.direction or \"Import\") }} | Date: {{ doc.date_created }}\n  </div>\n  <table class=\"header-table\">\n  </table>\n  \n  <div class=\"section-title\">Costing Summary: Quoted vs Invoiced</div>\n  <table class=\"summary-table\">\n    <thead><tr><th>METRIC</th><th>QUOTED</th><th>INVOICED</th><th>VARIANCE</th></tr></thead>\n    <tbody>\n      <tr>\n        <td style=\"text-align:left; font-weight:bold;\">Revenue</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(doc.total_quoted_revenue or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(totals.invoiced_revenue or 0) }}</td>\n        <td class=\"number {% if (totals.invoiced_revenue or 0) - (doc.total_quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((totals.invoiced_revenue or 0) - (doc.total_quoted_revenue or 0)) }}</td>\n      </tr>\n      <tr>\n        <td style=\"text-align:left; font-weight:bold;\">Cost</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(doc.total_quoted_cost or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(totals.invoiced_cost or 0) }}</td>\n        <td class=\"number {% if (doc.total_quoted_cost or 0) - (totals.invoiced_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((doc.total_quoted_cost or 0) - (totals.invoiced_cost or 0)) }}</td>\n      </tr>\n      <tr class=\"total-row\">\n        <td style=\"text-align:left; font-weight:bold;\">Margin</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format((doc.total_quoted_revenue or 0) - (doc.total_quoted_cost or 0)) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format((totals.invoiced_revenue or 0) - (totals.invoiced_cost or 0)) }}</td>\n        <td class=\"number {% if ((totals.invoiced_revenue or 0) - (totals.invoiced_cost or 0)) - ((doc.total_quoted_revenue or 0) - (doc.total_quoted_cost or 0)) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format(((totals.invoiced_revenue or 0) - (totals.invoiced_cost or 0)) - ((doc.total_quoted_revenue or 0) - (doc.total_quoted_cost or 0))) }}</td>\n      </tr>\n      <tr class=\"total-row\">\n        <td style=\"text-align:left; font-weight:bold;\">Margin %</td>\n        <td class=\"number\">{{ \"%.1f\"|format(totals.quoted_margin_percent or 0) }}%</td>\n        <td class=\"number\">{{ \"%.1f\"|format(totals.invoiced_margin_percent or 0) }}%</td>\n        <td class=\"number\">\u2014</td>\n      </tr>\n    </tbody>\n  </table>\n  \n  <div class=\"section-title\">Charge Breakdown: Quoted vs Invoiced</div>\n  <table class=\"charge-table\">\n    <thead><tr><th style=\"width:25%;\">CHARGE</th><th style=\"width:15%;\">QUOTED REVENUE</th><th style=\"width:15%;\">INVOICED REVENUE</th><th style=\"width:15%;\">QUOTED COST</th><th style=\"width:15%;\">INVOICED COST</th><th style=\"width:15%;\">NET VARIANCE</th></tr></thead>\n    <tbody>\n      {% for charge in cost_data.charges or [] %}\n      <tr>\n        <td>{{ charge.charge }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(charge.quoted_revenue or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(charge.invoiced_revenue or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(charge.quoted_cost or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(charge.invoiced_cost or 0) }}</td>\n        <td class=\"number {% if ((charge.invoiced_revenue or 0) - (charge.invoiced_cost or 0)) - ((charge.quoted_revenue or 0) - (charge.quoted_cost or 0)) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format(((charge.invoiced_revenue or 0) - (charge.invoiced_cost or 0)) - ((charge.quoted_revenue or 0) - (charge.quoted_cost or 0))) }}</td>\n      </tr>\n      {% endfor %}\n      <tr class=\"total-row\">\n        <td>TOTAL</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.quoted_revenue or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.invoiced_revenue or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.quoted_cost or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.invoiced_cost or 0) }}</td>\n        <td class=\"number {% if ((cost_data.totals.invoiced_revenue or 0) - (cost_data.totals.invoiced_cost or 0)) - ((cost_data.totals.quoted_revenue or 0) - (cost_data.totals.quoted_cost or 0)) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format(((cost_data.totals.invoiced_revenue or 0) - (cost_data.totals.invoiced_cost or 0)) - ((cost_data.totals.quoted_revenue or 0) - (cost_data.totals.quoted_cost or 0))) }}</td>\n      </tr>\n    </tbody>\n  </table>\n  \n  <div class=\"section-title\">Party Breakdown: Customers</div>\n  <table class=\"party-table\">\n    <thead><tr><th style=\"width:30%;\">CUSTOMER</th><th style=\"width:23%;\">QUOTED REVENUE</th><th style=\"width:23%;\">INVOICED REVENUE</th><th style=\"width:24%;\">VARIANCE</th></tr></thead>\n    <tbody>\n      {% for party in party_data.customers or [] %}\n      <tr>\n        <td>{{ party.party }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(party.quoted_revenue or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(party.invoiced_revenue or 0) }}</td>\n        <td class=\"number {% if (party.invoiced_revenue or 0) - (party.quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party.invoiced_revenue or 0) - (party.quoted_revenue or 0)) }}</td>\n      </tr>\n      {% endfor %}\n      <tr class=\"total-row\">\n        <td>TOTAL CUSTOMERS</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(party_data.totals.quoted_revenue or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(party_data.totals.invoiced_revenue or 0) }}</td>\n        <td class=\"number {% if (party_data.totals.invoiced_revenue or 0) - (party_data.totals.quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party_data.totals.invoiced_revenue or 0) - (party_data.totals.quoted_revenue or 0)) }}</td>\n      </tr>\n    </tbody>\n  </table>\n  \n  <div class=\"section-title\">Party Breakdown: Suppliers</div>\n  <table class=\"party-table\">\n    <thead><tr><th style=\"width:30%;\">SUPPLIER</th><th style=\"width:23%;\">QUOTED COST</th><th style=\"width:23%;\">INVOICED COST</th><th style=\"width:24%;\">VARIANCE</th></tr></thead>\n    <tbody>\n      {% for party in party_data.suppliers or [] %}\n      <tr>\n        <td>{{ party.party }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(party.quoted_cost or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(party.invoiced_cost or 0) }}</td>\n        <td class=\"number {% if (party.quoted_cost or 0) - (party.invoiced_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party.quoted_cost or 0) - (party.invoiced_cost or 0)) }}</td>\n      </tr>\n      {% endfor %}\n      <tr class=\"total-row\">\n        <td>TOTAL SUPPLIERS</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(party_data.totals.quoted_cost or 0) }}</td>\n        <td class=\"number\">{{ \"{:,.0f}\".format(party_data.totals.invoiced_cost or 0) }}</td>\n        <td class=\"number {% if (party_data.totals.quoted_cost or 0) - (party_data.totals.invoiced_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party_data.totals.quoted_cost or 0) - (party_data.totals.invoiced_cost or 0)) }}</td>\n      </tr>\n    </tbody>\n  </table>\n  \n  {% set sales_invoices = frappe.db.get_list('Sales Invoice', filters={'forwarding_job_reference': doc.name}, fields=['name', 'creation', 'grand_total', 'status', 'is_return'], order_by='creation desc') or [] %}\n  {% set purchase_invoices = frappe.db.get_list('Purchase Invoice', filters={'forwarding_job_reference': doc.name}, fields=['name', 'creation', 'grand_total', 'status', 'is_return'], order_by='creation desc') or [] %}\n  {% if sales_invoices or purchase_invoices %}\n  <div class=\"section-title\">Linked Invoices</div>\n  <table class=\"party-table\">\n    <thead><tr><th style=\"width:25%;\">DOCUMENT NAME</th><th style=\"width:20%; text-align:left;\">DOCUMENT TYPE</th><th style=\"width:20%;\">DATE CREATED</th><th style=\"width:17%;\">AMOUNT</th><th style=\"width:18%;\">STATUS</th></tr></thead>\n    <tbody>\n      {% for si in sales_invoices %}<tr><td>{{ si.name }}</td><td style=\"text-align:left;\">{{ \"Credit Note\" if si.is_return else \"Sales Invoice\" }}</td><td>{{ frappe.utils.formatdate(si.creation, \"dd-MMM-yy\") }}</td><td class=\"number\">{{ \"{:,.0f}\".format(si.grand_total or 0) }}</td><td>{{ si.status }}</td></tr>{% endfor %}\n      {% for pi in purchase_invoices %}<tr><td>{{ pi.name }}</td><td style=\"text-align:left;\">{{ \"Credit Note\" if pi.is_return else \"Purchase Invoice\" }}</td><td>{{ frappe.utils.formatdate(pi.creation, \"dd-MMM-yy\") }}</td><td class=\"number\">{{ \"{:,.0f}\".format(pi.grand_total or 0) }}</td><td>{{ pi.status }}</td></tr>{% endfor %}\n    </tbody>\n  </table>\n  {% endif %}\n  \n  <div class=\"footer\"><p>Generated on {{ doc.date_created }} | {{ doc.currency or \"USD\" }} | For internal use only</p></div>\n  <div class=\"page-number\">Page <span class=\"page\"></span> of <span class=\"toPage\"></span></div>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2026-01-18 01:13:24.561325",
 "modified_by": "Administrator",
 "module": "Forwarding Service",
 "name": "Forwarding Job Cost Sheet",
 "owner": "Administrator",
 "page_number": "Bottom Right",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_for": "DocType",
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}
