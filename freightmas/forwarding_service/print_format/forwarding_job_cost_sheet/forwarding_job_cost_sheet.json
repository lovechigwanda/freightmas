{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-10-16 22:47:46.120646",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Forwarding Job",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!-- Simple Forwarding Job Cost Sheet -->\n{%- set no_default_print_heading = 1 -%}\n<div class=\"print-format\">\n  <style>\n    body { \n      font-family: Arial, sans-serif; \n      font-size: 11px; \n      margin: 0; \n      padding: 20px;\n      color: #333;\n    }\n    \n    .header-table {\n      width: 100%;\n      border-collapse: collapse;\n      margin-bottom: 20px;\n      border: 1px solid #ddd;\n    }\n    \n    .header-table td {\n      padding: 8px;\n      border: 1px solid #ddd;\n      vertical-align: top;\n    }\n    \n    .header-title {\n      text-align: center;\n      font-size: 16px;\n      font-weight: bold;\n      margin-bottom: 15px;\n      text-transform: uppercase;\n    }\n    \n    .summary-table, .charge-table {\n      width: 100%;\n      border-collapse: collapse;\n      margin-bottom: 20px;\n      border: 1px solid #333;\n    }\n    \n    .summary-table th, .charge-table th {\n      background-color: #f0f0f0;\n      padding: 8px;\n      border: 1px solid #333;\n      text-align: center;\n      font-weight: bold;\n      font-size: 10px;\n    }\n    \n    .summary-table td, .charge-table td {\n      padding: 6px 8px;\n      border: 1px solid #333;\n      text-align: right;\n    }\n    \n    .charge-table td:first-child,\n    .charge-table td:nth-child(2),\n    .charge-table td:nth-child(3) {\n      text-align: left;\n    }\n    \n    .total-row {\n      background-color: #f5f5f5;\n      font-weight: bold;\n    }\n    \n    .positive {\n      color: #008000;\n    }\n    \n    .negative {\n      color: #d00;\n    }\n    \n    .section-title {\n      font-weight: bold;\n      font-size: 12px;\n      margin: 15px 0 5px 0;\n      text-transform: uppercase;\n    }\n    \n    @media print {\n      body { padding: 10px; }\n      .page-break { page-break-after: always; }\n    }\n  </style>\n\n  <!-- Header -->\n  <div class=\"header-title\">{{ doc.company or \"FreightMas\" }} - Forwarding Job Cost Sheet</div>\n\n  <!-- Job Information Header -->\n  <table class=\"header-table\">\n    <tr>\n      <td style=\"width:15%; font-weight:bold;\">Job No:</td>\n      <td style=\"width:35%;\">{{ doc.name }}</td>\n      <td style=\"width:15%; font-weight:bold;\">Date:</td>\n      <td style=\"width:35%;\">{{ doc.date_created }}</td>\n    </tr>\n    <tr>\n      <td style=\"font-weight:bold;\">Customer:</td>\n      <td>{{ doc.customer }}</td>\n      <td style=\"font-weight:bold;\">Mode:</td>\n      <td>{{ (doc.shipment_mode or \"Sea\") ~ \" \" ~ (doc.direction or \"Import\") }}</td>\n    </tr>\n    <tr>\n      <td style=\"font-weight:bold;\">Customer Ref:</td>\n      <td>{{ doc.customer_reference or \"—\" }}</td>\n      <td style=\"font-weight:bold;\">Status:</td>\n      <td>{{ doc.status or \"Draft\" }}</td>\n    </tr>\n  </table>\n\n  <!-- Executive Summary -->\n  <div class=\"section-title\">Executive Summary</div>\n  <table class=\"summary-table\">\n    <thead>\n      <tr>\n        <th style=\"width:20%;\">METRIC</th>\n        <th style=\"width:20%;\">PLANNED</th>\n        <th style=\"width:20%;\">ACTUAL</th>\n        <th style=\"width:20%;\">VARIANCE</th>\n        <th style=\"width:20%;\">VARIANCE %</th>\n      </tr>\n    </thead>\n    <tbody>\n      {% set planned_revenue = doc.total_quoted_revenue or 0 %}\n      {% set actual_revenue = doc.total_working_revenue or 0 %}\n      {% set planned_cost = doc.total_quoted_cost or 0 %}\n      {% set actual_cost = doc.total_working_cost or 0 %}\n      {% set planned_profit = planned_revenue - planned_cost %}\n      {% set actual_profit = actual_revenue - actual_cost %}\n      {% set planned_margin = (planned_profit / planned_revenue * 100) if planned_revenue > 0 else 0 %}\n      {% set actual_margin = (actual_profit / actual_revenue * 100) if actual_revenue > 0 else 0 %}\n      \n      <tr>\n        <td style=\"text-align:left; font-weight:bold;\">Revenue</td>\n        <td>{{ \"{:,.0f}\".format(planned_revenue) }}</td>\n        <td>{{ \"{:,.0f}\".format(actual_revenue) }}</td>\n        <td class=\"{% if (actual_revenue - planned_revenue) >= 0 %}positive{% else %}negative{% endif %}\">\n          {{ \"{:,.0f}\".format(actual_revenue - planned_revenue) }}\n        </td>\n        <td class=\"{% if (actual_revenue - planned_revenue) >= 0 %}positive{% else %}negative{% endif %}\">\n          {% if planned_revenue > 0 %}{{ \"%.1f\"|format((actual_revenue - planned_revenue) / planned_revenue * 100) }}%{% else %}—{% endif %}\n        </td>\n      </tr>\n      <tr>\n        <td style=\"text-align:left; font-weight:bold;\">Cost</td>\n        <td>{{ \"{:,.0f}\".format(planned_cost) }}</td>\n        <td>{{ \"{:,.0f}\".format(actual_cost) }}</td>\n        <td class=\"{% if (actual_cost - planned_cost) <= 0 %}positive{% else %}negative{% endif %}\">\n          {{ \"{:,.0f}\".format(actual_cost - planned_cost) }}\n        </td>\n        <td class=\"{% if (actual_cost - planned_cost) <= 0 %}positive{% else %}negative{% endif %}\">\n          {% if planned_cost > 0 %}{{ \"%.1f\"|format((actual_cost - planned_cost) / planned_cost * 100) }}%{% else %}—{% endif %}\n        </td>\n      </tr>\n      <tr class=\"total-row\">\n        <td style=\"text-align:left; font-weight:bold;\">PROFIT</td>\n        <td style=\"font-weight:bold;\">{{ \"{:,.0f}\".format(planned_profit) }}</td>\n        <td style=\"font-weight:bold;\">{{ \"{:,.0f}\".format(actual_profit) }}</td>\n        <td style=\"font-weight:bold;\" class=\"{% if (actual_profit - planned_profit) >= 0 %}positive{% else %}negative{% endif %}\">\n          {{ \"{:,.0f}\".format(actual_profit - planned_profit) }}\n        </td>\n        <td style=\"font-weight:bold;\" class=\"{% if (actual_profit - planned_profit) >= 0 %}positive{% else %}negative{% endif %}\">\n          {% if planned_profit != 0 %}{{ \"%.1f\"|format((actual_profit - planned_profit) / abs(planned_profit) * 100) }}%{% else %}—{% endif %}\n        </td>\n      </tr>\n      <tr class=\"total-row\">\n        <td style=\"text-align:left; font-weight:bold;\">PROFIT %</td>\n        <td style=\"font-weight:bold;\">{{ \"%.1f\"|format(planned_margin) }}%</td>\n        <td style=\"font-weight:bold;\">{{ \"%.1f\"|format(actual_margin) }}%</td>\n        <td style=\"font-weight:bold;\" class=\"{% if (actual_margin - planned_margin) >= 0 %}positive{% else %}negative{% endif %}\">\n          {{ \"%.1f\"|format(actual_margin - planned_margin) }}%\n        </td>\n        <td style=\"font-weight:bold;\">—</td>\n      </tr>\n    </tbody>\n  </table>\n\n  <!-- Charge Analysis -->\n  <div class=\"section-title\">Charge Analysis</div>\n  <table class=\"charge-table\">\n    <thead>\n      <tr>\n        <th style=\"width:20%;\">CHARGE</th>\n        <th style=\"width:12%;\">CUSTOMER</th>\n        <th style=\"width:12%;\">SUPPLIER</th>\n        <th style=\"width:6%;\">QTY</th>\n        <th style=\"width:10%;\">PLANNED REV</th>\n        <th style=\"width:10%;\">PLANNED COST</th>\n        <th style=\"width:10%;\">ACTUAL REV</th>\n        <th style=\"width:10%;\">ACTUAL COST</th>\n        <th style=\"width:10%;\">MARGIN</th>\n      </tr>\n    </thead>\n    <tbody>\n      <!-- Create a comprehensive charge map -->\n      {% set charge_map = {} %}\n      \n      <!-- Add planned charges -->\n      {% if doc.forwarding_costing_charges %}\n        {% for row in doc.forwarding_costing_charges %}\n          {% set key = row.charge ~ \"|\" ~ (row.customer or \"\") ~ \"|\" ~ (row.supplier or \"\") %}\n          {% if charge_map.update({key: {\n            'charge': row.charge,\n            'customer': row.customer or \"—\",\n            'supplier': row.supplier or \"—\",\n            'qty': row.qty or 1,\n            'planned_revenue': row.revenue_amount or 0,\n            'planned_cost': row.cost_amount or 0,\n            'actual_revenue': 0,\n            'actual_cost': 0\n          }}) %}\n          {% endif %}\n        {% endfor %}\n      {% endif %}\n      \n      <!-- Add actual revenue charges -->\n      {% if doc.forwarding_revenue_charges %}\n        {% for row in doc.forwarding_revenue_charges %}\n          {% set key = row.charge ~ \"|\" ~ (row.customer or \"\") ~ \"|\" %}\n          {% if key in charge_map %}\n            {% if charge_map[key].update({'actual_revenue': row.revenue_amount or 0}) %}{% endif %}\n          {% else %}\n            {% if charge_map.update({key: {\n              'charge': row.charge,\n              'customer': row.customer or \"—\",\n              'supplier': \"—\",\n              'qty': row.qty or 1,\n              'planned_revenue': 0,\n              'planned_cost': 0,\n              'actual_revenue': row.revenue_amount or 0,\n              'actual_cost': 0\n            }}) %}\n            {% endif %}\n          {% endif %}\n        {% endfor %}\n      {% endif %}\n      \n      <!-- Add actual cost charges -->\n      {% if doc.forwarding_cost_charges %}\n        {% for row in doc.forwarding_cost_charges %}\n          {% set key = row.charge ~ \"||\" ~ (row.supplier or \"\") %}\n          {% if key in charge_map %}\n            {% if charge_map[key].update({'actual_cost': row.cost_amount or 0}) %}{% endif %}\n          {% else %}\n            {% if charge_map.update({key: {\n              'charge': row.charge,\n              'customer': \"—\",\n              'supplier': row.supplier or \"—\",\n              'qty': row.qty or 1,\n              'planned_revenue': 0,\n              'planned_cost': 0,\n              'actual_revenue': 0,\n              'actual_cost': row.cost_amount or 0\n            }}) %}\n            {% endif %}\n          {% endif %}\n        {% endfor %}\n      {% endif %}\n      \n      <!-- Display all charges -->\n      {% set total_planned_rev = 0 %}\n      {% set total_planned_cost = 0 %}\n      {% set total_actual_rev = 0 %}\n      {% set total_actual_cost = 0 %}\n      \n      {% for key, charge in charge_map.items() %}\n        {% set total_planned_rev = total_planned_rev + charge.planned_revenue %}\n        {% set total_planned_cost = total_planned_cost + charge.planned_cost %}\n        {% set total_actual_rev = total_actual_rev + charge.actual_revenue %}\n        {% set total_actual_cost = total_actual_cost + charge.actual_cost %}\n        {% set margin = (charge.actual_revenue or charge.planned_revenue) - (charge.actual_cost or charge.planned_cost) %}\n        \n        <tr>\n          <td>{{ charge.charge }}</td>\n          <td>{{ charge.customer }}</td>\n          <td>{{ charge.supplier }}</td>\n          <td>{{ charge.qty }}</td>\n          <td>{{ \"{:,.0f}\".format(charge.planned_revenue) if charge.planned_revenue > 0 else \"—\" }}</td>\n          <td>{{ \"{:,.0f}\".format(charge.planned_cost) if charge.planned_cost > 0 else \"—\" }}</td>\n          <td>{{ \"{:,.0f}\".format(charge.actual_revenue) if charge.actual_revenue > 0 else \"—\" }}</td>\n          <td>{{ \"{:,.0f}\".format(charge.actual_cost) if charge.actual_cost > 0 else \"—\" }}</td>\n          <td class=\"{% if margin >= 0 %}positive{% else %}negative{% endif %}\">\n            {{ \"{:,.0f}\".format(margin) }}\n          </td>\n        </tr>\n      {% endfor %}\n      \n      <!-- Totals Row -->\n      <tr class=\"total-row\">\n        <td colspan=\"4\" style=\"text-align:left; font-weight:bold;\">TOTALS</td>\n        <td style=\"font-weight:bold;\">{{ \"{:,.0f}\".format(total_planned_rev) }}</td>\n        <td style=\"font-weight:bold;\">{{ \"{:,.0f}\".format(total_planned_cost) }}</td>\n        <td style=\"font-weight:bold;\">{{ \"{:,.0f}\".format(total_actual_rev) }}</td>\n        <td style=\"font-weight:bold;\">{{ \"{:,.0f}\".format(total_actual_cost) }}</td>\n        <td style=\"font-weight:bold;\" class=\"{% if (total_actual_rev - total_actual_cost) >= 0 %}positive{% else %}negative{% endif %}\">\n          {{ \"{:,.0f}\".format(total_actual_rev - total_actual_cost) }}\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n  <!-- Footer -->\n  <div style=\"margin-top: 20px; text-align: center; font-size: 10px; color: #666;\">\n    <p>Generated on {{ doc.date_created }} | {{ doc.currency or \"USD\" }} | FreightMas</p>\n  </div>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-11-02 18:30:59.591244",
 "modified_by": "Administrator",
 "module": "Forwarding Service",
 "name": "Forwarding Job Cost Sheet",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}