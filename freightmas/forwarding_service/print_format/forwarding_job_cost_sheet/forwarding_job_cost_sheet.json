{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-11-08 23:06:50.923254",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Forwarding Job",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!-- Forwarding Job Cost Sheet - Enhanced with Utility Functions -->\n{%- set no_default_print_heading = 1 -%}\n{% set cost_data = frappe.call('freightmas.utils.fwjb_cost_sheet_calc.get_charge_details_for_cost_sheet', job_name=doc.name) or {} %}\n{% set party_data = frappe.call('freightmas.utils.fwjb_cost_sheet_calc.get_party_details_for_cost_sheet', job_name=doc.name) or {} %}\n{% set totals = frappe.call('freightmas.utils.fwjb_cost_sheet_calc.get_job_totals_summary', job_name=doc.name) or {} %}\n<div class=\"print-format\">\n  <style>\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body { font-family: Arial, sans-serif; font-size: 11px; color: #000; line-height: 1.3; background: #fff; }\n    .print-format { width: 100%; max-width: 100%; padding: 15px; }\n    \n    /* Header Styling */\n    .header-title { \n      text-align: center; \n      font-size: 16px; \n      font-weight: 700; \n      margin-bottom: 8px; \n      text-transform: uppercase; \n      color: #000;\n      letter-spacing: 0.3px;\n    }\n    \n    .header-subtitle {\n      text-align: center;\n      font-size: 14px;\n      color: #000;\n      margin-bottom: 12px;\n      line-height: 1.2;\n    }\n    \n    .header-table { \n      display: none;\n    }\n    \n    /* Section Titles */\n    .section-title { \n      font-weight: 700; \n      font-size: 13px; \n      margin: 12px 0 8px 0; \n      text-transform: uppercase; \n      color: #000;\n      background: #fff;\n      border-bottom: 2px solid #000;\n      padding: 7px 10px;\n      letter-spacing: 0.3px;\n    }\n    \n    /* Tables */\n    .summary-table, .charge-table, .party-table { \n      width: 100%; \n      border-collapse: collapse; \n      margin-bottom: 12px;\n      border: 1px solid #000;\n      background: #fff;\n    }\n    \n    .summary-table th, .charge-table th, .party-table th { \n      background-color: #fff; \n      color: #000;\n      padding: 6px 8px; \n      border: 1px solid #000;\n      text-align: right; \n      font-weight: 700; \n      font-size: 12px;\n      text-transform: uppercase;\n      letter-spacing: 0.2px;\n    }\n    \n    .summary-table th:first-child, .charge-table th:first-child, .party-table th:first-child {\n      text-align: left;\n    }\n    \n    .summary-table td, .charge-table td, .party-table td { \n      padding: 5px 8px; \n      border: 1px solid #000; \n      text-align: right; \n      font-size: 12px;\n      line-height: 1.2;\n    }\n    \n    /* No alternating rows - keep it clean */\n    .summary-table tbody tr:nth-child(odd), \n    .charge-table tbody tr:nth-child(odd), \n    .party-table tbody tr:nth-child(odd) { \n      background-color: #fff; \n    }\n    \n    /* First column alignment */\n    .summary-table td:first-child,\n    .charge-table td:first-child, \n    .party-table td:first-child { \n      text-align: left; \n      font-weight: 500;\n    }\n    \n    /* Total Row */\n    .total-row { \n      background-color: #fff; \n      font-weight: 700;\n      border-top: 2px solid #000;\n      border-bottom: 2px solid #000;\n    }\n    \n    /* Number Formatting */\n    .number { \n      text-align: right; \n      font-family: monospace;\n      letter-spacing: 0.1px;\n    }\n    \n    /* Color Indicators - Only for Variances */\n    .positive { \n      color: #008000; \n      font-weight: 700;\n    }\n    \n    .negative { \n      color: #cc0000; \n      font-weight: 700;\n    }\n    \n    /* Footer */\n    .footer { \n      margin-top: 15px; \n      text-align: center; \n      font-size: 9px; \n      color: #000; \n      border-top: 1px solid #000; \n      padding-top: 8px;\n    }\n    \n    /* Print Media */\n    @media print { \n      body { padding: 10px; margin: 0; }\n      .print-format { padding: 10px; }\n      .page-break { page-break-after: always; }\n      .summary-table, .charge-table, .party-table { page-break-inside: avoid; }\n    }\n  </style>\n  <div class=\"header-title\">{{ doc.company or \"FreightMas\" }} - Forwarding Job Cost Sheet</div>\n  <div class=\"header-subtitle\">\n    Job No: {{ doc.name }} | Customer Ref: {{ doc.customer_reference or \"\u2014\" }}<br>\n    Customer: {{ doc.customer }}, Mode: {{ (doc.shipment_mode or \"Sea\") ~ \" \" ~ (doc.direction or \"Import\") }} | Date: {{ doc.date_created }}\n  </div>\n  <table class=\"header-table\">\n  </table>\n  <div class=\"section-title\">Costing Summary: Quoted vs Working vs Invoiced</div>\n  <table class=\"summary-table\">\n    <thead><tr><th>METRIC</th><th>QUOTED</th><th>WORKING</th><th>VARIANCE</th><th>INVOICED</th><th>VARIANCE</th></tr></thead>\n    <tbody>\n      <tr><td style=\"text-align:left; font-weight:bold;\">Revenue</td><td class=\"number\">{{ \"{:,.0f}\".format(doc.total_quoted_revenue or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(doc.total_working_revenue or 0) }}</td><td class=\"number {% if (doc.total_working_revenue or 0) - (doc.total_quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((doc.total_working_revenue or 0) - (doc.total_quoted_revenue or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(totals.invoiced_revenue or 0) }}</td><td class=\"number {% if (totals.invoiced_revenue or 0) - (doc.total_quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((totals.invoiced_revenue or 0) - (doc.total_quoted_revenue or 0)) }}</td></tr>\n      <tr><td style=\"text-align:left; font-weight:bold;\">Cost</td><td class=\"number\">{{ \"{:,.0f}\".format(doc.total_quoted_cost or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(doc.total_working_cost or 0) }}</td><td class=\"number {% if (doc.total_quoted_cost or 0) - (doc.total_working_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((doc.total_quoted_cost or 0) - (doc.total_working_cost or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(totals.invoiced_cost or 0) }}</td><td class=\"number {% if (doc.total_quoted_cost or 0) - (totals.invoiced_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((doc.total_quoted_cost or 0) - (totals.invoiced_cost or 0)) }}</td></tr>\n      <tr class=\"total-row\"><td style=\"text-align:left; font-weight:bold;\">Margin</td><td class=\"number\">{{ \"{:,.0f}\".format((doc.total_quoted_revenue or 0) - (doc.total_quoted_cost or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format((doc.total_working_revenue or 0) - (doc.total_working_cost or 0)) }}</td><td class=\"number {% if ((doc.total_working_revenue or 0) - (doc.total_working_cost or 0)) - ((doc.total_quoted_revenue or 0) - (doc.total_quoted_cost or 0)) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format(((doc.total_working_revenue or 0) - (doc.total_working_cost or 0)) - ((doc.total_quoted_revenue or 0) - (doc.total_quoted_cost or 0))) }}</td><td class=\"number\">{{ \"{:,.0f}\".format((totals.invoiced_revenue or 0) - (totals.invoiced_cost or 0)) }}</td><td class=\"number {% if ((totals.invoiced_revenue or 0) - (totals.invoiced_cost or 0)) - ((doc.total_quoted_revenue or 0) - (doc.total_quoted_cost or 0)) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format(((totals.invoiced_revenue or 0) - (totals.invoiced_cost or 0)) - ((doc.total_quoted_revenue or 0) - (doc.total_quoted_cost or 0))) }}</td></tr>\n      <tr class=\"total-row\"><td style=\"text-align:left; font-weight:bold;\">Margin %</td><td class=\"number\">{{ \"%.1f\"|format(totals.quoted_margin_percent or 0) }}%</td><td class=\"number\">{{ \"%.1f\"|format(totals.working_margin_percent or 0) }}%</td><td class=\"number\">\u2014</td><td class=\"number\">{{ \"%.1f\"|format(totals.invoiced_margin_percent or 0) }}%</td><td class=\"number\">\u2014</td></tr>\n    </tbody>\n  </table>\n  <div class=\"section-title\">Charge Breakdown: Quoted vs Working</div>\n  <table class=\"charge-table\">\n    <thead><tr><th style=\"width:25%;\">CHARGE</th><th style=\"width:12%;\">QUOTED REV</th><th style=\"width:12%;\">WORKING REV</th><th style=\"width:12%;\">VARIANCE</th><th style=\"width:12%;\">QUOTED COST</th><th style=\"width:12%;\">WORKING COST</th><th style=\"width:15%;\">VARIANCE</th></tr></thead>\n    <tbody>\n      {% for charge in cost_data.charges or [] %}<tr><td>{{ charge.charge }}</td><td class=\"number\">{{ \"{:,.0f}\".format(charge.quoted_revenue or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(charge.working_revenue or 0) }}</td><td class=\"number {% if (charge.working_revenue or 0) - (charge.quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((charge.working_revenue or 0) - (charge.quoted_revenue or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(charge.quoted_cost or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(charge.working_cost or 0) }}</td><td class=\"number {% if (charge.quoted_cost or 0) - (charge.working_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((charge.quoted_cost or 0) - (charge.working_cost or 0)) }}</td></tr>{% endfor %}\n      <tr class=\"total-row\"><td>TOTAL</td><td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.quoted_revenue or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.working_revenue or 0) }}</td><td class=\"number {% if (cost_data.totals.working_revenue or 0) - (cost_data.totals.quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((cost_data.totals.working_revenue or 0) - (cost_data.totals.quoted_revenue or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.quoted_cost or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.working_cost or 0) }}</td><td class=\"number {% if (cost_data.totals.quoted_cost or 0) - (cost_data.totals.working_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((cost_data.totals.quoted_cost or 0) - (cost_data.totals.working_cost or 0)) }}</td></tr>\n    </tbody>\n  </table>\n  <div class=\"section-title\">Charge Breakdown: Quoted vs Invoiced (Variance Analysis)</div>\n  <table class=\"charge-table\">\n    <thead><tr><th style=\"width:25%;\">CHARGE</th><th style=\"width:12%;\">QUOTED REV</th><th style=\"width:12%;\">INVOICED REV</th><th style=\"width:12%;\">VARIANCE</th><th style=\"width:12%;\">QUOTED COST</th><th style=\"width:12%;\">INVOICED COST</th><th style=\"width:15%;\">VARIANCE</th></tr></thead>\n    <tbody>\n      {% for charge in cost_data.charges or [] %}<tr><td>{{ charge.charge }}</td><td class=\"number\">{{ \"{:,.0f}\".format(charge.quoted_revenue or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(charge.invoiced_revenue or 0) }}</td><td class=\"number {% if (charge.invoiced_revenue or 0) - (charge.quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((charge.invoiced_revenue or 0) - (charge.quoted_revenue or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(charge.quoted_cost or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(charge.invoiced_cost or 0) }}</td><td class=\"number {% if (charge.quoted_cost or 0) - (charge.invoiced_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((charge.quoted_cost or 0) - (charge.invoiced_cost or 0)) }}</td></tr>{% endfor %}\n      <tr class=\"total-row\"><td>TOTAL</td><td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.quoted_revenue or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.invoiced_revenue or 0) }}</td><td class=\"number {% if (cost_data.totals.invoiced_revenue or 0) - (cost_data.totals.quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((cost_data.totals.invoiced_revenue or 0) - (cost_data.totals.quoted_revenue or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.quoted_cost or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(cost_data.totals.invoiced_cost or 0) }}</td><td class=\"number {% if (cost_data.totals.quoted_cost or 0) - (cost_data.totals.invoiced_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((cost_data.totals.quoted_cost or 0) - (cost_data.totals.invoiced_cost or 0)) }}</td></tr>\n    </tbody>\n  </table>\n  <div class=\"section-title\">Party Breakdown: Customers</div>\n  <table class=\"party-table\">\n    <thead><tr><th style=\"width:20%;\">CUSTOMER</th><th style=\"width:12%;\">QUOTED REV</th><th style=\"width:12%;\">WORKING REV</th><th style=\"width:12%;\">VARIANCE</th><th style=\"width:12%;\">INVOICED REV</th><th style=\"width:12%;\">VARIANCE</th></tr></thead>\n    <tbody>\n      {% for party in party_data.customers or [] %}<tr><td>{{ party.party }}</td><td class=\"number\">{{ \"{:,.0f}\".format(party.quoted_revenue or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(party.working_revenue or 0) }}</td><td class=\"number {% if (party.working_revenue or 0) - (party.quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party.working_revenue or 0) - (party.quoted_revenue or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(party.invoiced_revenue or 0) }}</td><td class=\"number {% if (party.invoiced_revenue or 0) - (party.quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party.invoiced_revenue or 0) - (party.quoted_revenue or 0)) }}</td></tr>{% endfor %}\n      <tr class=\"total-row\"><td>TOTAL CUSTOMERS</td><td class=\"number\">{{ \"{:,.0f}\".format(party_data.totals.quoted_revenue or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(party_data.totals.working_revenue or 0) }}</td><td class=\"number {% if (party_data.totals.working_revenue or 0) - (party_data.totals.quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party_data.totals.working_revenue or 0) - (party_data.totals.quoted_revenue or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(party_data.totals.invoiced_revenue or 0) }}</td><td class=\"number {% if (party_data.totals.invoiced_revenue or 0) - (party_data.totals.quoted_revenue or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party_data.totals.invoiced_revenue or 0) - (party_data.totals.quoted_revenue or 0)) }}</td></tr>\n    </tbody>\n  </table>\n  <div class=\"section-title\">Party Breakdown: Suppliers</div>\n  <table class=\"party-table\">\n    <thead><tr><th style=\"width:20%;\">SUPPLIER</th><th style=\"width:12%;\">QUOTED COST</th><th style=\"width:12%;\">WORKING COST</th><th style=\"width:12%;\">VARIANCE</th><th style=\"width:12%;\">INVOICED COST</th><th style=\"width:12%;\">VARIANCE</th></tr></thead>\n    <tbody>\n      {% for party in party_data.suppliers or [] %}<tr><td>{{ party.party }}</td><td class=\"number\">{{ \"{:,.0f}\".format(party.quoted_cost or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(party.working_cost or 0) }}</td><td class=\"number {% if (party.quoted_cost or 0) - (party.working_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party.quoted_cost or 0) - (party.working_cost or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(party.invoiced_cost or 0) }}</td><td class=\"number {% if (party.quoted_cost or 0) - (party.invoiced_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party.quoted_cost or 0) - (party.invoiced_cost or 0)) }}</td></tr>{% endfor %}\n      <tr class=\"total-row\"><td>TOTAL SUPPLIERS</td><td class=\"number\">{{ \"{:,.0f}\".format(party_data.totals.quoted_cost or 0) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(party_data.totals.working_cost or 0) }}</td><td class=\"number {% if (party_data.totals.quoted_cost or 0) - (party_data.totals.working_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party_data.totals.quoted_cost or 0) - (party_data.totals.working_cost or 0)) }}</td><td class=\"number\">{{ \"{:,.0f}\".format(party_data.totals.invoiced_cost or 0) }}</td><td class=\"number {% if (party_data.totals.quoted_cost or 0) - (party_data.totals.invoiced_cost or 0) >= 0 %}positive{% else %}negative{% endif %}\">{{ \"{:,.0f}\".format((party_data.totals.quoted_cost or 0) - (party_data.totals.invoiced_cost or 0)) }}</td></tr>\n    </tbody>\n  </table>\n  <div class=\"footer\"><p>Generated on {{ doc.date_created }} | {{ doc.currency or \"USD\" }} | FreightMas</p></div>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-11-08 23:17:39.204516",
 "modified_by": "Administrator",
 "module": "Forwarding Service",
 "name": "Forwarding Job Cost Sheet",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}